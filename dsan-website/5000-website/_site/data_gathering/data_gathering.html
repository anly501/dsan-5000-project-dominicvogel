<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DSAN-5000: Project - Data Gathering</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">DSAN-5000: Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about_me.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../introduction.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/anly501/dsan-5000-project-dominicvogel/tree/main/dsan-website/5000-website/data" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/anly501/dsan-5000-project-dominicvogel" rel="" target="">
 <span class="menu-text">Code</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../data_gathering/data_gathering.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data Gathering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../data_cleaning/data_cleaning.html" rel="" target="">
 <span class="menu-text">Data Cleaning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../eda/eda.html" rel="" target="">
 <span class="menu-text">Data Exploration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../naive_bayes/naive_bayes.html" rel="" target="">
 <span class="menu-text">Naive Bayes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../clustering/clustering.html" rel="" target="">
 <span class="menu-text">Clustering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../dimensionality_reduction/dimensionality_reduction.html" rel="" target="">
 <span class="menu-text">Dimensionality Reduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../decision_trees/decision_trees.html" rel="" target="">
 <span class="menu-text">Decision Trees</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../conclusion/conclusions.html" rel="" target="">
 <span class="menu-text">Conclusions</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-gathering" id="toc-data-gathering" class="nav-link active" data-scroll-target="#data-gathering">Data Gathering</a>
  <ul class="collapse">
  <li><a href="#accessing-the-ncaahoopr-r-package" id="toc-accessing-the-ncaahoopr-r-package" class="nav-link" data-scroll-target="#accessing-the-ncaahoopr-r-package">Accessing the <em>ncaahoopR</em> R package</a></li>
  <li><a href="#accessing-barttorviks-ncaa-data-using-python" id="toc-accessing-barttorviks-ncaa-data-using-python" class="nav-link" data-scroll-target="#accessing-barttorviks-ncaa-data-using-python">Accessing <em>Barttorvik’s NCAA Data</em> using Python</a></li>
  <li><a href="#accessing-kenpoms-ncaa-data-using-python" id="toc-accessing-kenpoms-ncaa-data-using-python" class="nav-link" data-scroll-target="#accessing-kenpoms-ncaa-data-using-python">Accessing <em>KenPom’s NCAA Data</em> Using Python</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Gathering</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="data-gathering" class="level1">
<h1>Data Gathering</h1>
<section id="accessing-the-ncaahoopr-r-package" class="level3">
<h3 class="anchored" data-anchor-id="accessing-the-ncaahoopr-r-package">Accessing the <em>ncaahoopR</em> R package</h3>
<p>For my data sources, there were a few places I wanted to start.</p>
<p>The first is the ncaahoopR package. The package scrapes the ESPN.com website to generate different data sets based on publicly available NCAA basketball data. ncaahoopR is easy to install and use, and allows me to generate data from any games tracked on ESPN.</p>
<p>Further information about the package can be found <a href="https://github.com/lbenz730/ncaahoopR">here</a>.</p>
<p>Here is an example of me exploring this package. I used the “get_pbp” function to collect a data frame of all play-by-play data for Creighton (my favorite team) from the 2022-23 season. Each time the function is called, the package scrapes all game data from the entire season, which takes a few minutes to collect.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ncaahoopR)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>creighton <span class="ot">&lt;-</span> <span class="fu">get_pbp</span>(<span class="st">"Creighton"</span>, <span class="st">"2022-23"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(creighton, <span class="at">file =</span> <span class="st">"../data/creighton_2022_23.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(creighton[, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     game_id       date                 home      away play_id
1  401485099 2022-11-07 St. Thomas-Minnesota Creighton       1
2  401485099 2022-11-07 St. Thomas-Minnesota Creighton       2
3  401485099 2022-11-07 St. Thomas-Minnesota Creighton       3
4  401485099 2022-11-07 St. Thomas-Minnesota Creighton       4
5  401485099 2022-11-07 St. Thomas-Minnesota Creighton       5
6  401485099 2022-11-07 St. Thomas-Minnesota Creighton       6
7  401485099 2022-11-07 St. Thomas-Minnesota Creighton       7
8  401485099 2022-11-07 St. Thomas-Minnesota Creighton       8
9  401485099 2022-11-07 St. Thomas-Minnesota Creighton       9
10 401485099 2022-11-07 St. Thomas-Minnesota Creighton      10</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of rows:"</span>, <span class="fu">nrow</span>(creighton), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of rows: 11128 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of columns:"</span>, <span class="fu">ncol</span>(creighton), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of columns: 39 </code></pre>
</div>
</div>
<p>Obviously, this is a massive data set with lots of potential insights. One thing that initially stood out to me are the two win probability columns. The first, “win_prob”, is a snapshot of the home team’s win probability during a specific play after factoring in pre-game point spread. The other column, “naive_win_prob”, doesn’t use pre-game point spread to determine win probability.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>creighton_change <span class="ot">&lt;-</span> creighton <span class="sc">%&gt;%</span> <span class="fu">filter</span>(scoring_play <span class="sc">==</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  win_prob <span class="sc">&gt;=</span> <span class="fu">lag</span>(win_prob, <span class="at">default =</span> <span class="fu">first</span>(win_prob)) <span class="sc">+</span> .<span class="dv">2</span> <span class="sc">|</span>     </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  win_prob <span class="sc">&lt;=</span> <span class="fu">lag</span>(win_prob, <span class="at">default =</span> <span class="fu">first</span>(win_prob)) <span class="sc">-</span> .<span class="dv">2</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(creighton_change[, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     game_id       date         home          away play_id
1  401485141 2022-11-17 UC Riverside     Creighton       1
2  401486690 2022-11-22     Arkansas     Creighton     299
3  401486690 2022-11-22     Arkansas     Creighton     304
4  401486690 2022-11-22     Arkansas     Creighton     309
5  401486690 2022-11-22     Arkansas     Creighton     336
6  401483381 2022-12-04    Creighton      Nebraska       1
7  401485177 2022-12-10    Creighton           BYU     383
8  401485177 2022-12-10    Creighton           BYU     384
9  401485177 2022-12-10    Creighton           BYU     388
10 401483440 2022-12-12    Creighton Arizona State     318</code></pre>
</div>
</div>
<p>In the filtered data frame above, I looked to see how many scoring plays there were throughout the season that impacted Creighton’s win percentage by +/- 20%. Of the 11444 plays recorded during the season, only 32 fit such criteria.</p>
</section>
<section id="accessing-barttorviks-ncaa-data-using-python" class="level3">
<h3 class="anchored" data-anchor-id="accessing-barttorviks-ncaa-data-using-python">Accessing <em>Barttorvik’s NCAA Data</em> using Python</h3>
<p>Barttorvik is one of the two major sites for advanced college basketball team statistics. They track dozens of advanced metrics, creating efficiency and team rank methodology with the goal of determining the best teams. College basketball had 363 NCAA Division 1 Men’s programs in 2023. Since there are so many teams, it becomes extremely difficult to effectively evaluate teams head to head.</p>
<p>This site looks to make comparisons between teams and across years much easier. Luckily, they make all of their data sets free and easily accessible <a href="https://barttorvik.com/">here</a>.</p>
<p>I started by using the requests package in Python to import the .csv of last year’s data. It contains 45 columns and 363 rows (one for each team). As the project goes on, I will likely incorporate previous years’ data as well in order to analyze trends from year to year.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Imports</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>csv_url <span class="op">=</span> <span class="st">"http://barttorvik.com/2023_team_results.csv"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>local_filename <span class="op">=</span> <span class="st">"barttorvik_2023.csv"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(csv_url)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> response.status_code <span class="op">==</span> <span class="dv">200</span>:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(local_filename, <span class="st">'wb'</span>) <span class="im">as</span> outfile:</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        outfile.write(response.content)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Failed to retrieve the file. Status code:"</span>, response.status_code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>barttorvik_df <span class="op">=</span> pd.read_csv(<span class="st">"barttorvik_2023.csv"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>barttorvik_df.columns <span class="op">=</span> [<span class="st">'Team'</span>, <span class="st">'Conf'</span>, <span class="st">'Record'</span>, <span class="st">'AdjOE'</span>, <span class="st">'OERank'</span>, <span class="st">'AdjDE'</span>, <span class="st">'DERank'</span>, <span class="st">'Barthag'</span>, <span class="st">'Rank'</span>, <span class="st">'ProjW'</span>, <span class="st">'ProjL'</span>, <span class="st">'ProConW'</span>, <span class="st">'ProConL'</span>, <span class="st">'ConRec'</span>, <span class="st">'SOS'</span>, <span class="st">'NCSOS'</span>, <span class="st">'Consos'</span>, <span class="st">'ProjSOS'</span>, <span class="st">'ProjNonconSOS'</span>, <span class="st">'ProjConSOS'</span>, <span class="st">'EliteSOS'</span>, <span class="st">'EliteNonconSOS'</span>, <span class="st">'OppOE'</span>, <span class="st">'OppDE'</span>, <span class="st">'OppProjOE'</span>, <span class="st">'OppProjDE'</span>, <span class="st">'ConAdjOE'</span>,<span class="st">'ConAdjDE'</span>, <span class="st">'QualO'</span>, <span class="st">'QualD'</span>, <span class="st">'QualBarthag'</span>, <span class="st">'QualGames'</span>, <span class="st">'FUN'</span>, <span class="st">'ConPF'</span>,<span class="st">'ConPA'</span>, <span class="st">'ConPoss'</span>, <span class="st">'ConOE'</span>, <span class="st">'ConDE'</span>, <span class="st">'ConSOSRemain'</span>, <span class="st">'ConfWinPct'</span>, <span class="st">'WAB'</span>, <span class="st">'WABRk'</span>, <span class="st">'FunRk'</span>, <span class="st">'AdjT'</span>]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(barttorvik_df.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          Team  Conf Record       AdjOE  ...        WAB  WABRk  FunRk       AdjT
1  Connecticut    BE   31-8  121.478653  ...   5.033129     13    280  66.727894
2      Alabama   SEC   31-6  116.081342  ...  10.193101      1     89  72.551428
3      Houston  Amer   33-4  117.307101  ...   8.046128      5    111  63.359244
4         UCLA   P12   31-6  114.914658  ...   8.402795      4    152  66.071648
5    Tennessee   SEC  25-11  111.211495  ...   2.809739     25    349  65.146696

[5 rows x 44 columns]</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>barttorvik_df.to_csv(<span class="st">"../data/barttorvik_2023.csv"</span>, index<span class="op">=</span> <span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>When importing the 2023 data, I realized that the column names imported incorrectly. I went through and renamed each column in order to ensure the data was properly represented and easy to access.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>full_barttorvik <span class="op">=</span> pd.read_csv(<span class="st">"../data/cbb.csv"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>values_to_change <span class="op">=</span> [<span class="st">"Champions"</span>, <span class="st">"2ND"</span>, <span class="st">"F4"</span>, <span class="st">"E8"</span>, <span class="st">"S16"</span>, <span class="st">"R32"</span>, <span class="st">"R64"</span>, <span class="st">"N/A"</span>]</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>new_values <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>]</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">"POSTSEASON"</span>] <span class="op">=</span> full_barttorvik[<span class="st">"POSTSEASON"</span>].replace(values_to_change, new_values)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">"SEED"</span>].fillna(<span class="dv">17</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">"POSTSEASON"</span>].fillna(<span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2013</span>, <span class="dv">2024</span>):</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    filtered_data <span class="op">=</span> full_barttorvik[full_barttorvik[<span class="st">'YEAR'</span>] <span class="op">==</span> year]</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    full_barttorvik.loc[full_barttorvik[<span class="st">'YEAR'</span>] <span class="op">==</span> year, <span class="st">'YearOffenseRank'</span>] <span class="op">=</span> filtered_data[<span class="st">'ADJOE'</span>].rank(ascending<span class="op">=</span><span class="va">False</span>).astype(<span class="bu">int</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    full_barttorvik.loc[full_barttorvik[<span class="st">'YEAR'</span>] <span class="op">==</span> year, <span class="st">'YearDefenseRank'</span>] <span class="op">=</span> filtered_data[<span class="st">'ADJDE'</span>].rank(ascending<span class="op">=</span><span class="va">True</span>).astype(<span class="bu">int</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">'TotalOffenseRank'</span>] <span class="op">=</span> full_barttorvik[<span class="st">'ADJOE'</span>].rank(ascending<span class="op">=</span><span class="va">False</span>).astype(<span class="bu">int</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">'TotalDefenseRank'</span>] <span class="op">=</span> full_barttorvik[<span class="st">'ADJDE'</span>].rank(ascending<span class="op">=</span><span class="va">True</span>).astype(<span class="bu">int</span>)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">"POSTSEASON"</span>] <span class="op">=</span> pd.to_numeric(full_barttorvik[<span class="st">"POSTSEASON"</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">"POSTSEASON"</span>].replace(<span class="st">''</span>, pd.NA, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>full_barttorvik[<span class="st">"Made_Tournament"</span>] <span class="op">=</span> full_barttorvik[<span class="st">"POSTSEASON"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="dv">1</span> <span class="cf">if</span> <span class="dv">1</span><span class="op">&lt;=</span> x <span class="op">&lt;=</span> <span class="dv">7</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>full_barttorvik.to_csv(<span class="st">"../data/cbb.csv"</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I also sourced a dataset that contains the same information as the 2023 BartTorvik data, but contains all team records since 2013. This more expansive dataset will be helpful in creating a more thorough analysis. With this dataset, I edited the POSTSEASON column to reflect how many NCAA Tournament rounds a team experienced. A team that didn’t make the tournament would receive a value of 0, while a team that won the National Championship by winning 6 tournament games would receive a value of 7.</p>
<p>I also ranked each team’s offensive and defensive efficiencies by year as this was something this dataset was lacking. I then resaved it for later use.</p>
</section>
<section id="accessing-kenpoms-ncaa-data-using-python" class="level3">
<h3 class="anchored" data-anchor-id="accessing-kenpoms-ncaa-data-using-python">Accessing <em>KenPom’s NCAA Data</em> Using Python</h3>
<p>The other major college basketball site for advanced team statistics is KenPom. KenPom has their own ranking methodology, similar to Barttorvik. While many of their advanced stats are similar, they are markedly different and each worth exploring in their own right. The site can be viewed <a href="https://kenpom.com/">here</a>.</p>
<p>While KenPom’s homepage is free to view, accessing their full data requires a $20 annual subscription. I have this subscription, which allows me to download the site’s data sets and import them into Pandas in a similar way to the Barttorvik data.</p>
<p>As a side note, there is a “hoopR” package that is supposedly able to pull from the KenPom website directly with subscription credentials. I spent a few hours trying to figure out how to get it to work and unfortunately have had no luck. I may try to revisit this method down the line. I included my initial exploration of the package below.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>kenpom_df <span class="op">=</span> pd.read_csv(<span class="st">"../data/summary23.csv"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(kenpom_df.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Season           TeamName    Tempo  ...  RankAdjDE     AdjEM  RankAdjEM
0    2023  Abilene Christian  69.8901  ...        224  -1.46922        193
1    2023          Air Force  63.6234  ...        164   1.25207        147
2    2023              Akron  66.9744  ...        138   6.15562        105
3    2023            Alabama  72.7280  ...          3  27.28420          4
4    2023        Alabama A&amp;M  69.8428  ...        244 -11.62140        312

[5 rows x 16 columns]</code></pre>
</div>
</div>
<p>KenPom only provides 16 different features for their main data set, but having the subscription provides access to individual team pages and data, allowing for more in-depth information.</p>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>